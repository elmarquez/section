<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <style type="text/css">
        #viewport {
            border: 1px solid gray;
            height: 640px;
            width: 640px;
        }
    </style>
</head>
<body>
<h1>Section</h1>

<div id="viewport" style="clear:both"></div>
<script type="text/javascript" src="../lib/threejs/build/three.js"></script>
<script type="text/javascript" src="OrbitControls.js"></script>
<script type="text/javascript">
    // Set up the scene, camera, and renderer as global variables.
    var scene, camera, renderer, viewport;
    // define the model to be build
    var model = [
        {
            name:"weatherboard",
            thickness: 0.02,
            color: 'ff0000'
        },
        {
            name: "building wrap",
            thickness: 0.001,
            color: 'ff0000'
        },
        {
            name: "sheathing",
            thickness: 0.01,
            color: 'ff0000'
        }
    ];

    // Sets up the scene.
    function init() {
        // Create the scene and set the scene size.
        scene = new THREE.Scene();
        viewport = document.getElementById("viewport");
        var WIDTH = 400, HEIGHT = 400;
        // Create a renderer and add it to the DOM.
        renderer = new THREE.WebGLRenderer({antialias: true});
        renderer.setSize(WIDTH, HEIGHT);
        viewport.appendChild(renderer.domElement);
        // Create a camera, zoom it out from the model a bit, and add it to the scene.
        camera = new THREE.PerspectiveCamera(45, WIDTH / HEIGHT, 0.1, 20000);
        camera.position.set(2, 2, 2);
        scene.add(camera);
        // Create an event listener that resizes the renderer with the browser window.
        window.addEventListener('resize', function () {
            renderer.setSize(WIDTH, HEIGHT);
            camera.aspect = WIDTH / HEIGHT;
            camera.updateProjectionMatrix();
        });
        // Set the background color of the scene.
        // renderer.setClearColorHex(0x333F47, 1);
        renderer.setClearColorHex(0xffffff, 1);

        // Create a light, set its position, and add it to the scene.
        var light1 = new THREE.PointLight(0xaaaaaa);
        light1.position.set(-200, 300, -200);
        scene.add(light1);

        var light2 = new THREE.PointLight(0xffffff);
        light2.position.set(200, 300, 200);
        scene.add(light2);

        // create geometry
        var last = 0;
        model.forEach(function (element) {
            var geom = new THREE.BoxGeometry(1, 1, element.thickness || 1);
            var material = new THREE.MeshLambertMaterial({color: 0x00ff00});
            var mesh = new THREE.Mesh(geom, material);
            mesh.position.set(0,0,0);
            scene.add(mesh);
        });

        // Add OrbitControls so that we can pan around with the mouse.
        controls = new THREE.OrbitControls(camera, renderer.domElement);
    }

    // Renders the scene and updates the render as needed.
    function animate() {
        // Read more about requestAnimationFrame at http://www.paulirish.com/2011/requestanimationframe-for-smart-animating/
        requestAnimationFrame(animate);
        // Render the scene.
        renderer.render(scene, camera);
        controls.update();
    }

    // do it
    init();
    animate();
</script>

</body>
</html>